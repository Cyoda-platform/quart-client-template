{
  "description": "FSM workflow for brushing a pet using a typical finite-state machine model",
  "initial_state": "none",
  "states": {
    "none": {
      "transitions": {
        "start_brushing": {
          "action": {
            "name": "start_brushing"
          },
          "next": "prepare_brush"
        }
      }
    },
    "prepare_brush": {
      "transitions": {
        "brush_not_ready": {
          "action": {
            "name": "handle_brush_not_ready"
          },
          "next": "none"
        },
        "brush_ready": {
          "action": {
            "name": "prepare_brush"
          },
          "next": "brush_pet"
        }
      }
    },
    "brush_pet": {
      "transitions": {
        "brushing_complete": {
          "action": {
            "name": "brush_pet"
          },
          "next": "check_pet_reaction"
        },
        "brushing_failed": {
          "action": {
            "name": "handle_brushing_failed"
          },
          "next": "handle_brushing_issue"
        }
      }
    },
    "check_pet_reaction": {
      "transitions": {
        "pet_happy": {
          "action": {
            "name": "check_pet_reaction"
          },
          "condition": {
            "function": {
              "name": "is_pet_happy"
            },
            "type": "function"
          },
          "next": "finish_brushing"
        },
        "pet_unhappy": {
          "action": {
            "name": "check_pet_reaction"
          },
          "condition": {
            "function": {
              "name": "is_pet_unhappy"
            },
            "type": "function"
          },
          "next": "handle_unhappy_pet"
        }
      }
    },
    "finish_brushing": {
      "transitions": {
        "end": {
          "action": {
            "name": "finish_brushing"
          },
          "next": "none"
        }
      }
    },
    "handle_unhappy_pet": {
      "transitions": {
        "abort_brushing": {
          "action": {
            "name": "abort_brushing"
          },
          "next": "finish_brushing"
        },
        "retry_brushing": {
          "action": {
            "name": "soothe_pet"
          },
          "next": "brush_pet"
        }
      }
    },
    "handle_brushing_issue": {
      "transitions": {
        "abort_brushing": {
          "action": {
            "name": "abort_brushing"
          },
          "next": "finish_brushing"
        },
        "fix_issue": {
          "action": {
            "name": "fix_brushing_issue"
          },
          "next": "prepare_brush"
        }
      }
    }
  },
  "workflow_name": "brushing_pet_workflow"
}