{
    "description": "FSM workflow to brush rabbit entity",
    "initial_state": "none",
    "name": "brush_rabbit_workflow",
    "states": {
        "approach_rabbit": {
            "transitions": {
                "reach_rabbit": {
                    "action": {
                        "name": "approach_rabbit"
                    },
                    "next": "check_rabbit_mood"
                }
            }
        },
        "brush_rabbit": {
            "transitions": {
                "finish_brushing": {
                    "action": {
                        "name": "brush_rabbit"
                    },
                    "next": "end_brushing"
                },
                "rabbit_moves_away": {
                    "action": {
                        "name": "handle_escape"
                    },
                    "next": "handle_escape"
                }
            }
        },
        "calm_rabbit": {
            "transitions": {
                "try_to_calm": {
                    "action": {
                        "name": "calm_rabbit"
                    },
                    "next": "check_rabbit_mood"
                }
            }
        },
        "check_rabbit_mood": {
            "transitions": {
                "rabbit_is_agitated": {
                    "condition": {
                        "function": {
                            "name": "is_rabbit_agitated"
                        },
                        "type": "function"
                    },
                    "next": "calm_rabbit"
                },
                "rabbit_is_calm": {
                    "condition": {
                        "function": {
                            "name": "is_rabbit_calm"
                        },
                        "type": "function"
                    },
                    "next": "start_brush"
                }
            }
        },
        "end_brushing": {
            "transitions": {}
        },
        "handle_escape": {
            "transitions": {
                "give_up": {
                    "action": {
                        "name": "give_up_brushing"
                    },
                    "next": "end_brushing"
                },
                "regain_rabbit": {
                    "action": {
                        "name": "regain_rabbit"
                    },
                    "next": "approach_rabbit"
                }
            }
        },
        "none": {
            "transitions": {
                "start_brushing": {
                    "action": {
                        "name": "start_brushing"
                    },
                    "next": "approach_rabbit"
                }
            }
        },
        "start_brush": {
            "transitions": {
                "brush_in_progress": {
                    "action": {
                        "name": "start_brush"
                    },
                    "next": "brush_rabbit"
                }
            }
        }
    }
}