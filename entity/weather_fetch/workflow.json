{
  "version": "1.0",
  "description": "FSM workflow for weather_fetch entity",
  "initial_state": "none",
  "workflow_name": "weather_fetch_workflow",
  "states": {
    "none": {
      "transitions": {
        "start_validation": {
          "next": "validate_input",
          "action": {
            "name": "process_validate_input"
          }
        }
      }
    },
    "validate_input": {
      "transitions": {
        "input_valid": {
          "next": "fetching_data",
          "condition": {
            "type": "function",
            "function": {
              "name": "process_validate_input"
            }
          },
          "action": {
            "name": "process_weather_fetch"  # orchestration stays here, but business logic split
          }
        },
        "input_invalid": {
          "next": "failed",
          "condition": {
            "type": "function",
            "function": {
              "name": "process_validate_input"
            }
          },
          "action": {
            "name": "process_validate_input"
          }
        }
      }
    },
    "fetching_data": {
      "transitions": {
        "fetch_data": {
          "next": "filter_data",
          "action": {
            "name": "process_fetch_data"
          }
        }
      }
    },
    "filter_data": {
      "transitions": {
        "filter_weather_data": {
          "next": "completed",
          "action": {
            "name": "process_filter_data"
          }
        }
      }
    },
    "completed": {
      "transitions": {}
    },
    "failed": {
      "transitions": {}
    }
  }
}